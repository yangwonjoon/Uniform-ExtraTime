import{u as h,b as x,e as b,h as g,j as t,F as i,i as j,k as p,d as N,l as k}from"./index-0d2ZcZCT.js";import{f as v}from"./index-CUds_l8L.js";const w=async e=>{const o=p(N,"products",e),a=await k(o);if(a.exists())return{productId:a.id,...a.data()};throw new Error("Product not found")},I=({product:e})=>{const o=h(),a=x(),{user:r}=b(),{cart:c,addCart:d,removeCart:m}=g(),n=(s,f)=>{if(f.stopPropagation(),!s){alert("제품 정보가 올바르지 않습니다.");return}r.email&&!r.isSeller?c.includes(s)?m(s):d(s):(alert("구매자 아이디로 로그인해주세요!"),o("/login"))},l=async()=>{await a.prefetchQuery({queryKey:["product",e.productId],queryFn:()=>w(e.productId),staleTime:1e4})},u=()=>{l().then(()=>{o(`/${e.productId}`)})};return t.jsxs("div",{className:"mx-auto mb-3 w-48 h-72 overflow-hidden",onMouseEnter:l,onClick:u,children:[t.jsxs("div",{className:"flex items-center justify-center h-48 shadow-lg rounded-lg border border-black relative",children:[t.jsx("img",{src:e.productImages[0],alt:"메인 이미지",className:"object-contain h-full"}),e.productId&&c.includes(e.productId)?t.jsx(i,{icon:j,className:"absolute bottom-0 right-0 m-2",onClick:s=>n(e.productId,s)}):t.jsx(i,{icon:v,className:"absolute bottom-0 right-0 m-2",onClick:s=>n(e.productId,s)})]}),t.jsxs("div",{className:"flex flex-col text-sm p-3",children:[t.jsx("h1",{className:"font-bold mb-1",children:e.productName}),t.jsxs("p",{className:"font-semibold",children:[e.productPrice,"원"]})]})]})};export{I as P};
